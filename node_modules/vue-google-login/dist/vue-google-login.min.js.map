{"version":3,"file":"vue-google-login.min.js","sources":["../src/GoogleAuth.js","../src/GoogleLogin.vue","../src/LoaderPlugin.js"],"sourcesContent":["let auth2;\r\nlet loadingPromise;\r\n\r\nconst createScript = () => {\r\n    return new Promise((resolve, reject) => {\r\n        const el = document.getElementById('auth2_script_id');\r\n        if (!el) {\r\n            let gplatformScript = document.createElement('script')\r\n            gplatformScript.setAttribute('src', 'https://apis.google.com/js/platform.js?onload=onGapiLoad')\r\n            gplatformScript.setAttribute(\"async\", true)\r\n            gplatformScript.setAttribute(\"defer\", \"defer\")\r\n            gplatformScript.setAttribute(\"id\", \"auth2_script_id\")\r\n            document.head.appendChild(gplatformScript);\r\n        }\r\n        resolve();\r\n    });\r\n\r\n}\r\n\r\nconst onGapiLoadPromise = (client_id) => {\r\n    return new Promise((resolve, reject) => {\r\n        window.onGapiLoad = () => {\r\n            window.gapi.load('auth2', () => {\r\n                try {\r\n                    auth2 = window.gapi.auth2.init({\r\n                        client_id: client_id,\r\n                    });\r\n                } catch (err) {\r\n                    reject({ err: 'client_id missing or is incorrect, did you add it to the component or plugin?' })\r\n                }\r\n                resolve(auth2);\r\n            })\r\n        }\r\n    })\r\n}\r\n\r\nconst loadingAuth2 = (client_id) => {\r\n    if (auth2) {\r\n        return Promise.resolve(auth2);\r\n    } else {\r\n        if (!loadingPromise)\r\n            loadingPromise = onGapiLoadPromise(client_id);\r\n        return loadingPromise;\r\n    }\r\n}\r\n\r\nconst load = (client_id) => {\r\n    return Promise.all(\r\n        [loadingAuth2(client_id), createScript()])\r\n        .then(results => {\r\n            return results[0];\r\n        });\r\n}\r\n\r\nconst wrapper = (f, method) => {\r\n    if (f)\r\n        return f[method]();\r\n    else {\r\n        const err = { err: 'Script not loaded correctly, did you added the plugin or the client_id to the component?' };\r\n        return Promise.reject(err);\r\n    }\r\n}\r\n\r\nconst signIn = () => wrapper(auth2, 'signIn');\r\n\r\nconst signOut = () => wrapper(auth2, 'signOut');\r\n\r\nexport default {\r\n    load,\r\n    signIn,\r\n    signOut\r\n}","<template>\r\n    <button @click=\"handleClick\">\r\n        <slot></slot>\r\n    </button>\r\n</template>\r\n\r\n<script>\r\n\r\nimport GoogleAuth from './GoogleAuth';\r\n\r\nexport default {\r\n    name: 'GoogleLogin',\r\n    props: {\r\n        client_id: {\r\n            type: String,\r\n            required: true\r\n        },\r\n        onSuccess: {\r\n            type: Function,\r\n            default: () => { }\r\n        },\r\n        onFailure: {\r\n            type: Function,\r\n            default: () => { }\r\n        },\r\n        logoutButton: {\r\n            type: Boolean,\r\n            default: false\r\n        }\r\n    },\r\n    methods: {\r\n        handleClick() {\r\n            const method = this.logoutButton ? 'signOut' : 'signIn';\r\n            GoogleAuth[method]().then(result => {\r\n                return this.onSuccess(result);\r\n            }).catch(err => {\r\n                return this.onFailure(err);\r\n            });\r\n        }\r\n    },\r\n    mounted() {\r\n        GoogleAuth.load(this.client_id).catch(err => {\r\n            console.log(err);\r\n        });\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import GoogleAuth from './GoogleAuth';\r\n\r\nexport default {\r\n    install (Vue, {client_id}) {\r\n        Vue.GoogleAuth = GoogleAuth.load(client_id);\r\n    }\r\n}"],"names":["auth2","loadingPromise","loadingAuth2","client_id","Promise","resolve","reject","window","onGapiLoad","gapi","load","init","err","onGapiLoadPromise","wrapper","f","method","all","document","getElementById","gplatformScript","createElement","setAttribute","head","appendChild","then","results","signIn","signOut","install","Vue","GoogleAuth"],"mappings":"sMAAA,IAAIA,EACAC,EAmCEC,EAAe,SAACC,UACdH,EACOI,QAAQC,QAAQL,IAElBC,IACDA,EAtBc,SAACE,UAChB,IAAIC,QAAQ,SAACC,EAASC,GACzBC,OAAOC,WAAa,WAChBD,OAAOE,KAAKC,KAAK,QAAS,eAElBV,EAAQO,OAAOE,KAAKT,MAAMW,MACtBR,UAAWA,IAEjB,MAAOS,GACLN,GAASM,IAAK,kFAElBP,EAAQL,QAWKa,CAAkBV,IAChCF,IAYTa,EAAU,SAACC,EAAGC,MACZD,EACA,OAAOA,EAAEC,YAGFZ,QAAQE,QADDM,IAAK,iGAUvBF,KAtBS,SAACP,UACHC,QAAQa,KACVf,EAAaC,GA5CX,IAAIC,QAAQ,SAACC,EAASC,OACdY,SAASC,eAAe,mBAC1B,KACDC,EAAkBF,SAASG,cAAc,UAC7CD,EAAgBE,aAAa,MAAO,4DACpCF,EAAgBE,aAAa,SAAS,GACtCF,EAAgBE,aAAa,QAAS,SACtCF,EAAgBE,aAAa,KAAM,mBACnCJ,SAASK,KAAKC,YAAYJ,GAE9Bf,QAmCCoB,KAAK,SAAAC,UACKA,EAAQ,MAmBvBC,OANW,kBAAMb,EAAQd,EAAO,WAOhC4B,QALY,kBAAMd,EAAQd,EAAO,aC9DzB,85ECAR6B,iBAASC,SAAM3B,IAAAA,UACX2B,EAAIC,WAAaA,EAAWrB,KAAKP"}